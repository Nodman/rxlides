<!DOCTYPE html>
<html>
<head>
    <title>rxlides</title>
    <meta property="page" content="components_communication">
    <link rel="stylesheet" type="text/css" href="../dist/common.css">
    <style type="text/css">
        .wrapper { margin: 10vh auto 0; }
        .gif-wrap { width: 16vw; height: 19vh; overflow: hidden; }
        .gif_cell { cursor: pointer; }
        .gif_cell img { width: 100%; }
        .smaller {
            font-size: 1.4vw;
        }
    </style>
</head>
<body style="font: 2vw monospace;">
    <div class="wrapper">
        <table>
            <tr>
                <td class="gif_cell" data-id="0">
                    [id:0 <span class="star">☆</span>]<br/>
                    <div class="gif-wrap">
                        <img class="gif" src="https://media0.giphy.com/media/rWUITWbA1dXK8/200w.gif">
                    </div>
                </td>
                <td class="gif_cell" data-id="1">
                    [id:1 <span class="star">★</span>]<br/>
                    <div class="gif-wrap">
                        <img class="gif" src="https://media3.giphy.com/media/1CLBGBQ1lM3QI/200w.gif">
                    </div>
                </td>
                <td class="gif_cell" data-id="2">
                    [id:2 <span class="star">★</span>]<br/>
                    <div class="gif-wrap">
                        <img class="gif" src="https://media2.giphy.com/media/LH4yPm9OhgHEk/200w.gif">
                    </div>
                </td>
                <td id="part_1" class="smaller">
                    onClick: <b>send_via_appbus</b>({<br/>
                    &nbsp;&nbsp;tell: 'singleFavUpdate',<br/>
                    &nbsp;&nbsp;data: {id, active: !active},<br/>
                    })
                </td>
            </tr>
            <tr>
                <td class="gif_cell" data-id="2">
                    [id:2 <span class="star">★</span>]<br/>
                    <div class="gif-wrap">
                        <img class="gif" src="https://media2.giphy.com/media/LH4yPm9OhgHEk/200w.gif">
                    </div>
                </td>
                <td class="gif_cell" data-id="3">
                    [id:3 <span class="star">☆</span>]<br/>
                    <div class="gif-wrap">
                        <img class="gif" src="https://media1.giphy.com/media/zsg9Adj13Dh2E/200w.gif">
                    </div>
                </td>
                <td class="gif_cell" data-id="4">
                    [id:4 <span class="star">★</span>]<br/>
                    <div class="gif-wrap">
                        <img class="gif" src="https://media3.giphy.com/media/J3fj1vuiAVbri/200w.gif">
                    </div>
                </td>
                <td id="part_2" class="smaller">
                    <b>favsStream</b><br/>
                    &nbsp;&nbsp;.map(favs => favs.has(id))<br/>
                    &nbsp;&nbsp;.subscribe(active => {<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;component.setProps({active})<br/>
                    &nbsp;&nbsp;})
                </td>
            </tr>
            <tr><td>&nbsp;</td></tr>
            <tr>
                <td id="part_3" colspan="3" rowspan="2" class="smaller">
                    <b>appBus</b><br/>
                    &nbsp;&nbsp;.filter(v => v.tell === 'singleFavUpdate')<br/>
                    &nbsp;&nbsp;.pluck('data')<br/>
                    &nbsp;&nbsp;.scan(new Set(), (acc, v) => {<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;v.active ? acc.add(v.id) : acc.delete(v.id)<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;return acc<br/>
                    &nbsp;&nbsp;})<br/>
                    &nbsp;&nbsp;.subscribe(<b>favsStream</b>)<br/>
                </td>
                <td>[<span class="star_count">3</span>]</td>
            </tr>
            <tr>
                <td id="part_4" class="smaller">
                    <b>favsStream</b><br/>
                    &nbsp;&nbsp;.pluck('size')<br/>
                    &nbsp;&nbsp;.subscribe(count => {<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;component.setProps({count})<br/>
                    &nbsp;&nbsp;})
                </td>
            </tr>
        </table>
    </div>
    <nav>
        <span class="arrow">&larr;</span>
        <span class="arrow" id="nav_u">&nbsp;</span>
        <span class="arrow" id="nav_d">&nbsp;</span>
        <span class="arrow">&rarr;</span>
        <span class="slide_name">&nbsp;</a>
    </nav>
    <script type="text/javascript" src="../dist/main.js"></script>
</body>
</html>
